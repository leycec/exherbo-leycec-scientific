# Copyright 2010 Cecil Curry <leycec@gmail.com>
# Distributed under the terms of the GNU General Purpose License v2

require python [ python_dep=2.6 ]

SUMMARY="Python 2 bindings for Cairo"
HOMEPAGE="http://www.cairographics.org/pycairo"
DOWNLOADS="http://cairographics.org/releases/${PNV}.tar.gz"
UPSTREAM_DOCUMENTATION="http://cairographics.org/documentation/pycairo [[ lang = en ]]"

LICENCES="|| ( LGPL-2.1 MPL-1.1 )"
SLOT="0"
PLATFORMS="~amd64 ~ppc64 ~x86"
MYOPTIONS=""
DEPENDENCIES="
    build:
        dev-util/pkg-config[>=0.20]
    build+run:
        x11-libs/cairo[=${PV}]
"

WORK="${WORKBASE}/pycairo-${PV}"

src_prepare() {
    default

    # Prevent hacky bytecode-compilation.
    edo sed -e 's~^\(py_compile = \).*$~\1true~' -i src/Makefile.in
}

src_install() {
    default
    python_bytecompile
}

